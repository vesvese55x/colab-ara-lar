#!/bin/bash

# Türkçe ve İngilizce yönergeler
echo "Lütfen mount etmek istediğiniz servisi seçin / Please select the service you want to mount:"
echo "1) Google Drive"
echo "2) Dropbox"
read -p "Seçiminiz (1/2) / Your choice (1/2): " choice

if [ "$choice" == "1" ]; then
    # Google Drive seçildi
    echo "Google Drive'ı mount etmeyi seçtiniz / You have chosen to mount Google Drive."
    echo "Arkaplanda /opt/google/drive/drive dosyası çalıştırılıyor / Running /opt/google/drive/drive in the background..."
    nohup /opt/google/drive/drive > /dev/null 2>&1 &
    echo "Mount işlemi tamamlandı / Mounting process completed."
elif [ "$choice" == "2" ]; then
    # Dropbox seçildi
    echo "Dropbox'u mount etmeyi seçtiniz / You have chosen to mount Dropbox."
    echo "rclone config ile otomatik ayarlar yapılıyor / Configuring rclone automatically..."
    
    # rclone config otomatik ayarları
    rclone config create dropbox dropbox > /dev/null 2>&1
    
    echo "Lütfen aşağıdaki URL'yi tarayıcınızda açın ve yetkilendirme işlemini gerçekleştirin / Please open the following URL in your browser and complete the authorization:"
    rclone authorize "dropbox"
    
    echo "Yetkilendirme tamamlandı / Authorization completed."
    echo "Dropbox mount ediliyor / Mounting Dropbox..."
    mkdir -p ~/dropbox
    rclone mount dropbox: ~/dropbox --vfs-cache-mode writes &
    echo "Mount işlemi tamamlandı / Mounting process completed."
else
    echo "Geçersiz seçim / Invalid choice."
fi

echo "Ana menüye dönülüyor / Returning to main menu..."
